{% extends "webapp/base.html" %}
{% block title %}Order #{{ order.id }} Results{% endblock %}

{% block content %}

<h1 class="title">Order #{{ order.id }} Results</h1>

<div class="content">
  <p>
    <strong>Vendor:</strong> {{ order.vendor }}<br>
    <strong>Host:</strong> {{ order.host }}<br>
    <strong>Mode:</strong> {{ order.get_optimization_mode_display }}<br>
    <strong>Pizzas ordered:</strong> {{ order.num_pizzas }}<br>
    <strong>Participants:</strong>
    {% for person in order.people.all %}
      {{ person }}{% if person.pk in guest_person_ids %} <em class="has-text-grey">(guest)</em>{% endif %}{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>
</div>

{% if pizzas %}
<h2 class="subtitle is-4 mt-4">Pizza Assignments</h2>
{% for pizza in pizzas %}
<div class="card mb-4">
  <div class="card-header">
    <p class="card-header-title">Pizza #{{ forloop.counter }}</p>
  </div>
  <div class="card-content">
    <p>
      <strong>Toppings:</strong>
      {% for t in pizza.toppings.all %}
        <span class="tag is-warning">{{ t }}</span>
      {% empty %}
        <em>none</em>
      {% endfor %}
    </p>

    <p class="mt-2">
      <strong>People:</strong>
      {% for person in pizza.people.all %}
        {{ person }}{% if person.pk in guest_person_ids %} <em class="has-text-grey">(guest)</em>{% endif %}{% if not forloop.last %}, {% endif %}
      {% endfor %}
    </p>
  </div>
</div>
{% endfor %}

{% else %}
<div class="notification is-light">
  <p>No pizza assignments have been generated yet.</p>
</div>
{% endif %}

<p><a class="button is-light mt-2" href="{% url 'create_order' %}">&larr; Create another order</a></p>
{% endblock %}
